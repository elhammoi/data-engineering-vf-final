{% extends "base.html" %}
{% block title %}Top Performers{% endblock %}

{% block content %}
<div class="text-center mb-4">
  <h2>Top Performers NBA</h2>
</div>

<div class="mb-4">
  <form method="get" class="row g-3 justify-content-center">
    <div class="col-auto">
      <label for="category" class="visually-hidden">Choisir une catégorie :</label>
      <select id="category" name="category" class="form-select">
          {% for category in categories %}
          <option value="{{ category }}" {% if category == selected_category %}selected{% endif %}>{{ category }}</option>
          {% endfor %}
      </select>
    </div>
    <div class="col-auto">
      <button type="submit" class="btn btn-primary">Filtrer</button>
    </div>
  </form>
</div>

{% if players %}
<div class="card shadow-sm">
  <div class="card-header">
    <h5 class="card-title mb-0">Classement - {{ selected_category }}</h5>
  </div>
  <div class="card-body p-0">
    <table class="table table-bordered mb-0">
      <thead>
        <tr>
          <th>Classement</th>
          <th>Joueur</th>
          <th>Équipe</th>
          <th>Valeur</th>
        </tr>
      </thead>
      <tbody>
        {% for player in players %}
        <tr>
          <td>{{ loop.index }}</td>
          <td><a href="{{ url_for('player', player_name=player.player_name) }}">{{ player.player_name }}</a></td>
          <td>{{ player.team }}</td>
          <td>{{ player.value }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% else %}
<div class="alert alert-warning text-center">
  Aucun joueur trouvé pour la catégorie sélectionnée.
</div>
{% endif %}

<div class="text-center mt-3">
  <a href="{{ url_for('index') }}" class="btn btn-secondary">Retour à l'accueil</a>
</div>
{% endblock %}
